<!DOCTYPE html>
<html>
<head>
  <title>Product Price Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #14A4A4;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 500px;
      margin: auto;
      background: #FFFF;
      padding: 20px;
      box-shadow: 0 0 90px #FFFFFF;
    }
    
    .container1 {
      max-width: 500px;
      margin: auto;
      background: #BBBBFF;
      padding: 20px;
      box-shadow: 0 0 150px #BBBBFF;
    }
    
    table {
      width: 100%;
    }
    h2 {
      color: #333;
    }
    
    button {
      background-color: #28a745;
      color: white;
      border: none;
      cursor: pointer;
    }
    
    button:hover {
      background-color: #218838;
    }
    
    .initialInput {
      padding: 2px;
      margin: 0px 0;
      width: 20%;
    }
    
    .result {
      margin-top: 30px;
      font-size: 1.1em;
      color: #555;
    }
    
    .retailHeader {
      border: 1px solid #000000;
      
    }
    .retail th, td {
      padding: 4px;
      text-align: left;
    }
    #investmentInfo {
      
    }
    
    #amountSpent {
      padding: 10px;
      margin: 5px 0;
      border: 1px solid #CCCC;
      border-radius: 4px;
      width: calc(100% - 24px);
    }
    #calculateQuantity {
      padding: 10px;
      margin: 5px 0;
      border: 1px solid #CCCC;
      border-radius: 4px;
      width: calc(100%);
    }
    #profitStart {
      padding: 4px;
      margin: 0px 0;
      
      width: 20%;
    }
    #profitEnd {
      padding: 4px;
      margin: 0px 0;
      width: 20%;
    }    
    #salesPrices {
      text-align: center;
    }
    
  </style>
</head>
<body>
  <div class="container">
    <h2>Retail Quantity Price Calculator</h2>
    <table id="investmentInfo">
      <tr>
        <td>
          <table>
            <tr>
              <td>Principle: <b>$</b><input type="number" value="1400" class="initialInput" id="invested"></td>
              <td>Initial Inventory: <input type="number" value="108" class="initialInput" id="initialInventory"><sub><b>g</b></sub></td>
            </tr>
            <td colspan="2"><center><hr width="50%"></center></td>
            <tr>
              <td>Profit Start: <input type="number" id="profitStart" class="initialInput" value="300"><b>%</b></td>
              <td>Profit End: <input type="number" id="profitEnd" class="initialInput" value="150"><b>%</b></td>
            </tr>
          </table>
        </td>
      <tr>
        <td colspan="2"><hr></td>
      </tr>
      <tr>
        <td colspan="2"><b>Price Per Gram:</b> <span id="pricePerGram"></span></td>
        
      </tr>
      <tr>
        <td colspan="2"><hr></td>
      </tr>
    </table>
    <table id="salesPrices">
      <tr>
        <th class="retailHeader">Quantity</th>
        <th class="retailHeader">Price</th>
        <th class="retailHeader">Profit</th>
      </tr>
    </table>
  </div>
  <hr>
<div class="container1">
    <h2>Quantity From Price Calculator</h2>
    <input type="number" id="amountSpent" placeholder="Enter amount in dollars">
    <button id="calculateQuantity">Calculate Quantity</button>
    <table>
      <tr>
        <td><div class="result" id="resultQuantity">Quantity to sell: <span id="quantityResult"></span> <sub><b>g</b></sub></div></td>
        <td><div class="result" id="resultProfit">Profit from sale: <sup><b>$</b></sup><span id="quantityResultProfit"></span></div></td>
    </tr>
  </table>
  </div>

  <script>
    
    
    // When the web page loads, run this code.
    window.onload = function() {

      // How much did you invest. (Dollar)
      const invested = document.getElementById("invested").value;

      // How much product did you get when you invested. (Grams)
      const initialInventory = document.getElementById("initialInventory").value;

      // Price of gram based on how you spent and how much you got.
      const pricePerGram = invested / initialInventory;
  document.getElementById('pricePerGram').textContent = `$${pricePerGram.toFixed(2)}`;

  const quantities = [1, 1.75, 3.5, 7, 14, 28];
  const salesPricesTable = document.getElementById('salesPrices');

  function calculateProfitMargin(quantity) {
    const startProfit = parseFloat(document.getElementById('profitStart').value) / 100;
    const endProfit = parseFloat(document.getElementById('profitEnd').value) / 100;
    const index = quantities.findIndex(q => q >= quantity);
    return startProfit - (index / (quantities.length - 1)) * (startProfit - endProfit);
  }

  function calculateAndDisplayPrices() {
    let tableRows = '';

    quantities.forEach((qty, index) => {
      const profitMargin = calculateProfitMargin(qty);
      const sellingPrice = pricePerGram * qty * (1 + profitMargin);
      tableRows += `<tr><td class="retail">${qty}g:</td><td>$${sellingPrice.toFixed(2)}</td></tr>`;
    });

    salesPricesTable.innerHTML += tableRows;
  }

      
      
      

   // Calculator 2
   function calculateQuantity() {

     const amountSpent = parseFloat(document.getElementById('amountSpent').value);

    // Assume the smallest quantity for initial profit margin calculation
    let profitMargin = calculateProfitMargin(quantities[0]);
    let quantity = amountSpent / (pricePerGram * (1 + profitMargin));

    // Find the closest higher quantity in the array to get a more accurate profit margin
    profitMargin = calculateProfitMargin(quantity);
    quantity = amountSpent / (pricePerGram * (1 + profitMargin));

    // Calculate profit
    const totalCost = pricePerGram * quantity;
    const totalRevenue = amountSpent;
    const profit = totalRevenue - totalCost;

    document.getElementById('resultQuantity').textContent = quantity.toFixed(2);
    document.getElementById('resultProfit').textContent = profit.toFixed(2);
  }

  calculateAndDisplayPrices();

  document.getElementById('profitStart').addEventListener('change', calculateAndDisplayPrices);
  document.getElementById('profitEnd').addEventListener('change', calculateAndDisplayPrices);
  document.getElementById('calculateQuantity').addEventListener('click', calculateQuantity);
};

  </script>
</body>
</html>
